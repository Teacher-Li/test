(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ae18eede"],{1591:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"live",staticClass:"live"},[n("div",{staticClass:"live-form"},[n("o-form",{attrs:{size:"small",labelWidth:0}},[n("o-form-item",[n("o-input",{on:{"on-enter":t.send},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),n("o-button",{attrs:{custom:"primary",type:"text"},on:{"on-click":t.send}},[t._v("\n                    发送\n                ")])],1)],1)],1)])},a=[];n("6b54");function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=n("85f2"),r=n.n(s);function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(t,i.key,i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)}}();var c=function(){function t(){o(this,t),this.canvas=document.createElement("canvas"),this.canvas.style.position="fixed",this.canvas.style.bottom=0,this.canvas.style.left=0,this.canvas.style.zIndex=999,this.canvas.style.pointerEvents="none",this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,document.body.appendChild(this.canvas);var e=this.canvas.getBoundingClientRect();this.w=e.right-e.left,this.h=e.bottom-e.top,this.ctx=this.canvas.getContext("2d"),this.ctx.font="20px Microsoft YaHei",this.barrageList=[],this.draw()}return u(t,[{key:"shoot",value:function(t){var e=this.getTop(),n=this.getColor(),i=this.getOffset(),a=Math.ceil(this.ctx.measureText(t).width);this.barrageList.push({value:t,top:e,left:this.w,color:n,offset:i,width:a})}},{key:"draw",value:function(){if(this.barrageList.length){this.ctx.clearRect(0,0,this.w,this.h);for(var t=0;t<this.barrageList.length;t++){var e=this.barrageList[t];e.left+e.width<=0?(this.barrageList.splice(t,1),t--):(e.left-=e.offset,this.drawText(e))}}requestAnimationFrame(this.draw.bind(this))}},{key:"drawText",value:function(t){this.ctx.fillStyle=t.color,this.ctx.fillText(t.value,t.left,t.top)}},{key:"getColor",value:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)}},{key:"getTop",value:function(){return Math.floor(Math.random()*(this.h-30))+30}},{key:"getOffset",value:function(){return+(4*Math.random()).toFixed(1)+1}}]),t}(),h={name:"LiveView",data:function(){return{barrage:null,value:""}},methods:{send:function(){var t=this.value;this.value="",t&&this.barrage.shoot(t)}},mounted:function(){this.barrage=new c}},f=h,d=n("2877"),v=Object(d["a"])(f,i,a,!1,null,null,null);e["default"]=v.exports},"454f":function(t,e,n){n("46a7");var i=n("584a").Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},"46a7":function(t,e,n){var i=n("63b6");i(i.S+i.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"85f2":function(t,e,n){t.exports=n("454f")}}]);